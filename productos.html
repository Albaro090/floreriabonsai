<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Productos | Florer√≠a Bonsai</title>
  <link rel="stylesheet" href="css/style.css">
  <link rel="icon" href="img/logo.png" type="image/png">
  <script src="https://kit.fontawesome.com/a2e0e9a65b.js" crossorigin="anonymous" defer></script>
</head>
<body>

  <!-- NAVBAR -->
  <nav class="navbar">
    <div class="logo">
      <img src="img/logo.png" alt="Logo Florer√≠a Bonsai">
      <h1>Florer√≠a Bonsai</h1>
    </div>
    <ul>
      <li><a href="index.html">Inicio</a></li>
      <li><a href="productos.html" class="activo">Productos</a></li>
      <li><a href="sobre_nosotros.html">Sobre Nosotros</a></li>
      <li><a href="contacto.html">Contacto</a></li>
    </ul>
  </nav>

  <!-- PRODUCTOS -->
  <main>
    <section class="inicio-productos">
      <h2> Arreglos Florales </h2>
      <div class="productos-grid">
        <div class="producto"><img src="img/arreglo1.png" alt=""><h3>Arreglo de rosas en caja</h3><p>S/ 70.00</p><button class="btn-comprar" data-producto="Ramo de Rosas Rojas">Comprar</button></div>
        <div class="producto"><img src="img/arreglo2.png" alt=""><h3>Arreglo con chocolate</h3><p>S/ 70.00</p><button class="btn-comprar" data-producto="Arreglo Primavera">Comprar</button></div>
        <div class="producto"><img src="img/arreglo3.png" alt=""><h3>Arreglo de rosas en caja</h3><p>S/ 65.00</p><button class="btn-comprar" data-producto="Ramo Tulipanes">Comprar</button></div>
        <div class="producto"><img src="img/arreglo4.png" alt=""><h3>Rosas en canasta</h3><p>S/ 70.00</p><button class="btn-comprar" data-producto="Arreglo Color de Vida">Comprar</button></div>
        <div class="producto"><img src="img/arreglo5.png" alt=""><h3>Rosas en canasta</h3><p>S/ 80.00</p><button class="btn-comprar" data-producto="Jard√≠n de Alegr√≠a">Comprar</button></div>
        <div class="producto"><img src="img/arreglo6.png" alt=""><h3>Arreglo peque√±o</h3><p>S/ 45.00</p><button class="btn-comprar" data-producto="Ramo Dulce Encanto">Comprar</button></div>
        <div class="producto"><img src="img/arreglo7.png" alt=""><h3>Arreglo de rosas en canasta</h3><p>S/ 70.00</p><button class="btn-comprar" data-producto="Arreglo Rosado">Comprar</button></div>
        <div class="producto"><img src="img/arreglo8.png" alt=""><h3>Arreglo de Girasoles en caja</h3><p>S/ 85.00</p><button class="btn-comprar" data-producto="Ramo Ex√≥tico">Comprar</button></div>
        <div class="producto"><img src="img/arreglo9.png" alt=""><h3>Arreglo de rosas</h3><p>S/ 48.00</p><button class="btn-comprar" data-producto="Flor del Amor">Comprar</button></div>
        <div class="producto"><img src="img/arreglo10.png" alt=""><h3>Rosas en canasta</h3><p>S/ 85.00</p><button class="btn-comprar" data-producto="Ramo Gardenia">Comprar</button></div>
        <div class="producto"><img src="img/arreglo11.png" alt=""><h3>Arreglo de rosas en caja</h3><p>S/ 65.00</p><button class="btn-comprar" data-producto="Arreglo Floral Sol">Comprar</button></div>
        <div class="producto"><img src="img/arreglo12.png" alt=""><h3>Arreglo de Rosas Rosadas</h3><p>S/ 55.00</p><button class="btn-comprar" data-producto="Ramo Rosas Rosadas">Comprar</button></div>
        <div class="producto"><img src="img/arreglo13.png" alt=""><h3>Canasta de rosas</h3><p>S/ 75.00</p><button class="btn-comprar" data-producto="Arreglo Fresas con Flores">Comprar</button></div>
        <div class="producto"><img src="img/arreglo14.png" alt=""><h3>Canasta en forma de corazon</h3><p>S/ 110.00</p><button class="btn-comprar" data-producto="Ramo de Lirios">Comprar</button></div>
        <div class="producto"><img src="img/arreglo15.png" alt=""><h3>Caja de Girasoles</h3><p>S/ 90.00</p><button class="btn-comprar" data-producto="Ramo de Amor">Comprar</button></div>
      </div>

      <h2> Ramos Florales </h2>
      <div class="productos-grid">
        <div class="producto"><img src="img/ramo1.png" alt=""><h3>Ramo de hierberas</h3><p>S/ 45.00</p><button class="btn-comprar" data-producto="Ramo Dulzura">Comprar</button></div>
        <div class="producto"><img src="img/ramo2.png" alt=""><h3>Ramo de lirios</h3><p>S/ 95.00</p><button class="btn-comprar" data-producto="Ramo Pasi√≥n">Comprar</button></div>
        <div class="producto"><img src="img/ramo3.png" alt=""><h3>Ramo de rosas blancas</h3><p>S/ 80.00</p><button class="btn-comprar" data-producto="Ramo Primavera">Comprar</button></div>
        <div class="producto"><img src="img/ramo4.png" alt=""><h3>Ramo de rosas rosadas</h3><p>S/ 50.00</p><button class="btn-comprar" data-producto="Ramo Rom√°ntico">Comprar</button></div>
        <div class="producto"><img src="img/ramo5.png" alt=""><h3>Ramo de Girasoles</h3><p>S/ 40.00</p><button class="btn-comprar" data-producto="Ramo Elegancia">Comprar</button></div>
      </div>

      <h2>‚öò Arreglos Funerarios ‚öò</h2>
      <div class="productos-grid">
        <div class="producto"><img src="img/funeral1.png" alt=""><h3>Corona en forma de coraz√≥n</h3><p>S/ 180.00</p><button class="btn-comprar" data-producto="Corona Blanca">Comprar</button></div>
        <div class="producto"><img src="img/funeral2.png" alt=""><h3>Corona en forma de coraz√≥n</h3><p>S/ 160.00</p><button class="btn-comprar" data-producto="Arreglo Paz Eterna">Comprar</button></div>
        <div class="producto"><img src="img/funeral3.png" alt=""><h3>Cruz Floral grande</h3><p>S/ 180.00</p><button class="btn-comprar" data-producto="Cruz Floral">Comprar</button></div>
        <div class="producto"><img src="img/funeral4.png" alt=""><h3>Corona forma de corazon mediana</h3><p>S/ 140.00</p><button class="btn-comprar" data-producto="Corona de Amor">Comprar</button></div>
        <div class="producto"><img src="img/funeral5.png" alt=""><h3>Corona grande</h3><p>S/ 230.00</p><button class="btn-comprar" data-producto="Ramo Despedida">Comprar</button></div>
      </div>

      <h2> Arreglos Especiales </h2>
      <div class="productos-grid">
        <div class="producto"><img src="img/especial1.png" alt=""><h3>Arreglo grande de rosas</h3><p>S/ 160.00</p><button class="btn-comprar" data-producto="Arreglo Aniversario">Comprar</button></div>
        <div class="producto"><img src="img/especial2.png" alt=""><h3>Arreglo grande primaveral</h3><p>S/ 250.00</p><button class="btn-comprar" data-producto="Caja Sorpresa">Comprar</button></div>
        <div class="producto"><img src="img/especial3.png" alt=""><h3>Arreglo grande de rosas</h3><p>S/ 210.00</p><button class="btn-comprar" data-producto="Coraz√≥n de Rosas">Comprar</button></div>
        <div class="producto"><img src="img/especial4.png" alt=""><h3>Arreglo Cumplea√±os</h3><p>S/ 80.00</p><button class="btn-comprar" data-producto="Arreglo Cumplea√±os">Comprar</button></div>
        <div class="producto"><img src="img/especial5.png" alt=""><h3>Arreglo Primaveral peque√±a</h3><p>S/ 100.00</p><button class="btn-comprar" data-producto="Canasta de Amor">Comprar</button></div>
      </div>
    </section>
  </main>

  <!-- MODAL (formulario detallado) -->
  <div class="modal" id="modalCompra" aria-hidden="true" role="dialog" aria-modal="true">
    <div class="modal-content" role="document">
      <button class="close" id="cerrarModal" aria-label="Cerrar">&times;</button>
      <h3 id="tituloProducto">Producto</h3>

      <form id="formCompra">
        <!-- SECCI√ìN: DEDICATORIA -->
        <fieldset class="modal-fieldset">
          <legend>Datos para la Dedicatoria</legend>
          <input type="text" id="dedPara" name="dedPara" placeholder="Para (nombre del destinatario)" required>
          <textarea id="dedicatoria" name="dedicatoria" placeholder="Dedicatoria (mensaje corto)" rows="3"></textarea>
        </fieldset>

        <!-- SECCI√ìN: A QUI√âN SE ENTREGA -->
        <fieldset class="modal-fieldset">
          <legend>¬øA qui√©n se entrega?</legend>
          <input type="text" id="recipientName" name="recipientName" placeholder="Nombre y apellido del destinatario" required>
          <input type="tel" id="recipientPhone" name="recipientPhone" placeholder="Tel√©fono celular destinatario (9XXXXXXXX)" pattern="[0-9]{7,15}" required>
        </fieldset>

        <!-- SECCI√ìN: ENTREGA -->
        <fieldset class="modal-fieldset">
          <legend>D√≠a y direcci√≥n de entrega</legend>
          <label for="deliveryDate" class="small-label">D√≠a de entrega</label>
          <input type="date" id="deliveryDate" name="deliveryDate" required>
          <input type="text" id="streetAddress" name="streetAddress" placeholder="Direcci√≥n de la calle" required>
          <input type="text" id="reference" name="reference" placeholder="Referencia (ej. puerta azul, piso 2, frente a...)">
        </fieldset>

        <button type="submit" class="btn-whatsapp" aria-label="Enviar pedido por WhatsApp">üì≤ Enviar pedido por WhatsApp</button>
      </form>
    </div>
  </div>

  <!-- FOOTER -->
  <footer>
    <div class="footer-social">
      <a href="#" aria-label="Facebook"><i class="fab fa-facebook-f"></i></a>
      <a href="#" aria-label="Instagram"><i class="fab fa-instagram"></i></a>
      <a href="https://wa.me/51984351497" target="_blank" aria-label="WhatsApp"><i class="fab fa-whatsapp"></i></a>
    </div>
    <p>¬© 2025 Florer√≠a Bonsai ‚Äî Todos los derechos reservados</p>
  </footer>

  <!-- SCRIPT: modal + env√≠o a WhatsApp -->
  <script>
    (function(){
      const waNumber = '51984351497';

      const modal = document.getElementById('modalCompra');
      const cerrarModal = document.getElementById('cerrarModal');
      const botones = document.querySelectorAll('.btn-comprar');
      const tituloProducto = document.getElementById('tituloProducto');
      const form = document.getElementById('formCompra');

      function openModal(producto) {
        tituloProducto.textContent = producto;
        modal.style.display = 'flex';
        modal.setAttribute('aria-hidden','false');
        // focus
        setTimeout(()=> document.getElementById('dedPara').focus(), 120);
      }

      function closeModal() {
        modal.style.display = 'none';
        modal.setAttribute('aria-hidden','true');
      }

      botones.forEach(btn => {
        btn.addEventListener('click', () => openModal(btn.dataset.producto));
      });

      cerrarModal.addEventListener('click', closeModal);
      window.addEventListener('click', e => { if (e.target === modal) closeModal(); });
      window.addEventListener('keydown', e => { if (e.key === 'Escape') closeModal(); });

      function formatDateToDDMMYYYY(isoDate) {
        if (!isoDate) return '';
        const d = new Date(isoDate + 'T00:00:00');
        const dd = String(d.getDate()).padStart(2,'0');
        const mm = String(d.getMonth()+1).padStart(2,'0');
        const yyyy = d.getFullYear();
        return `${dd}/${mm}/${yyyy}`;
      }

      form.addEventListener('submit', e => {
        e.preventDefault();

        const producto = tituloProducto.textContent || 'Producto';
        const dedPara = document.getElementById('dedPara').value.trim();
        const dedicatoria = document.getElementById('dedicatoria').value.trim();
        const recipientName = document.getElementById('recipientName').value.trim();
        const recipientPhone = document.getElementById('recipientPhone').value.trim();
        const deliveryISO = document.getElementById('deliveryDate').value;
        const deliveryDate = formatDateToDDMMYYYY(deliveryISO);
        const streetAddress = document.getElementById('streetAddress').value.trim();
        const reference = document.getElementById('reference').value.trim();

        if (!dedPara || !recipientName || !recipientPhone || !deliveryISO || !streetAddress) {
          alert('Por favor completa los campos obligatorios antes de enviar.');
          return;
        }

        let mensaje = `
üõí *Nuevo pedido - Florer√≠a Bonsai*

üå∏ *Producto:* ${producto}

üíå *Datos para la dedicatoria*
‚Ä¢ Para: ${dedPara}
‚Ä¢ Dedicatoria: ${dedicatoria || '-'}

üì¶ *A qui√©n se entrega*
‚Ä¢ Nombre: ${recipientName}
‚Ä¢ Tel√©fono: ${recipientPhone}

üìÖ *D√≠a de entrega:* ${deliveryDate}
üìç *Direcci√≥n:* ${streetAddress}
üìé *Referencia:* ${reference || '-'}

üí¨ *Mensaje adicional del cliente:* ${dedicatoria || '-'}
`;

        const waUrl = `https://wa.me/${waNumber}?text=${encodeURIComponent(mensaje)}`;
        window.open(waUrl, '_blank');

        closeModal();
        form.reset();
      });
    })();
  </script>

</body>
</html>
